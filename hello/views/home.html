<!-- * 
     * basic structure for an app's bootstrap view
     *
     * @author : andrÃ© Bittencourt, <andreb2890@yahoo.com.br>
     * -->


<!-- Include JS -->
<script src="../wp-content/plugins/codefw-apps/hello/js/js.js"></script>
<!-- /-->

<script>
    function TodoCtrl($scope, $http) {
        
        $scope.todos = [
            {text: 'learn angular', done: true},
            {text: 'build an angular app', done: false}];
        
       $scope.method = "GET";
       $scope.url = '/wordpress/wp-content/plugins/codefw-apps/hello/api.php?method=barber&params={"nome": "Bita"}';
       
       $scope.code = null;
    $scope.response = null;
 
    $http({method: $scope.method, url: $scope.url}).
      success(function(data, status) {
        $scope.status = status;
        $scope.data = data;
        $scope.todos = $scope.data;
        console.log($scope.data);
      }).
      error(function(data, status) {
        $scope.data = data || "Request failed";
        $scope.status = status;
    });
  
 
  $scope.updateModel = function(method, url) {
    $scope.method = method;
    $scope.url = url;
  };
    
        $scope.addTodo = function() {
            $scope.todos.push({text: $scope.todoText, done: false});
            $scope.todoText = '';
        };

        $scope.remaining = function() {
            var count = 0;
            angular.forEach($scope.todos, function(todo) {
                count += todo.done ? 0 : 1;
            });
            return count;
        };

        $scope.archive = function() {
            var oldTodos = $scope.todos;
            $scope.todos = [];
            angular.forEach(oldTodos, function(todo) {
                if (!todo.done)
                    $scope.todos.push(todo);
            });
        };
    }
</script>

<style>
    .done-true {
        text-decoration: line-through;
        color: grey;
    }
</style>

<!-- View's html code -->
<div class="container" ng-app>
    <h2>Todo</h2>
    <div ng-controller="TodoCtrl">
        <span>{{remaining()}} of {{todos.length}} remaining</span>
        [ <a href="" ng-click="archive()">archive</a> ]
        <ul class="unstyled">
            <li ng-repeat="todo in todos">
                <input type="checkbox" ng-model="todo.done">
                <span class="done-{{todo.done}}">{{todo.text}}</span>
            </li>
        </ul>
        <form ng-submit="addTodo()">
            <input type="text" ng-model="todoText"  size="30"
                   placeholder="add new todo here">
            <input class="btn btn-info"  type="submit" value="add">
        </form>
    </div>
</div>
<!-- /-->
